{"version":3,"sources":["views/App.tsx","components/loading/OilLoading.tsx","api/http.ts","api/request.ts","api/types.ts","views/pages/home/index.tsx","views/layout/default.tsx","plugins/Mp3/index.ts","components/player.tsx","redux/store/index.ts","index.tsx","router/index.tsx","views/logo.svg"],"names":["App","useState","count","setCount","useEffect","console","log","className","src","logo","alt","onClick","href","target","rel","OilLoading","props","show","axios","defaults","baseURL","process","interceptors","request","use","config","error","Promise","reject","response","data","get","url","params","getl","post","postl","createRequest","methods","api","a","async","res","http","getPlaylistDetail","Home","React","init","play","setPlay","musicInfo","setMusicInfo","autor","setAutor","album","setAlbum","loading","setLoading","initPlayer","id","gdList","trackIds","playlist","tracks","setTimeout","window","player","onIndex","i","ar","al","name","picUrl","prevMusic","pause","nextMusic","DefaultLayout","children","Mp3","playList","defaultList","playMode","buffer","inMusic","nextPlay","musicTitle","onIndexFun","this","document","getElementById","addEventListener","event","forEach","fn","evLoop","err","music","push","musicList","num","Math","floor","random","length","Fun","singlePlay","randomPlay","orderPlay","randomNum","Player","state","nowPlay","Component","store","createStore","action","type","ReactDOM","render","basename","exact","path","component","module","exports"],"mappings":"wRAkCeA,G,MA9BO,WAAM,MAGAC,mBAAS,GAHT,mBAGnBC,EAHmB,KAGZC,EAHY,KAS1B,OALAC,qBAAU,WACRC,QAAQC,IAAI,MAKZ,yBAAKC,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAKC,IAAKC,IAAMF,UAAU,WAAWG,IAAI,SACzC,2BACGR,EADH,IACU,4BAAQS,QAAU,WAAOR,EAASD,EAAQ,KAA1C,SADV,QAEO,6CAFP,wBAIA,uBACEK,UAAU,WACVK,KAAK,sBACLC,OAAO,SACPC,IAAI,uBAJN,mB,0CCGOC,G,cAjBsB,SAACC,GAIpC,OACE,gCACGA,EAAMC,KACL,uBAAKV,UAAU,mBACb,uBAAKA,UAAU,iBAGjB,oC,iBChBRW,IAAMC,SAASC,QAAUC,8BAEzBH,IAAMI,aAAaC,QAAQC,KAAI,SAAAC,GAE7B,OAAOA,KACL,SAAAC,GAEF,OAAOC,QAAQC,OAAOF,MAGxBR,IAAMI,aAAaO,SAASL,KAAI,SAAAK,GAE9B,OAAOA,EAASC,QACd,SAAAJ,GAEF,OAAOC,QAAQC,OAAOF,MAGxB,IAgBe,GACbK,IAjBU,SAACC,EAAaC,GACxB,OAAOf,IAAMa,IAAIC,EAAK,CAACC,YAiBvBC,KAVW,SAACF,EAAaC,GACzB,OAAOf,IAAMa,IAAIC,EAAK,CAACC,YAUvBE,KAfW,SAACH,EAAaC,EAAcR,GACvC,OAAOP,IAAMiB,KAAKH,EAAKC,EAAQR,IAe/BW,MARY,SAACJ,EAAaC,EAAcR,GACxC,OAAOP,IAAMiB,KAAKH,EAAKC,EAAQR,KC1BpBY,EAAgB,SAACC,EAAiBC,GAC7C,OAAO,SAAON,GAAP,eAAAO,EAAAC,OAAA,uDACDC,EAAOC,EAAaL,GAASC,EAAKN,GADjC,kBAEES,GAFF,uCAUIE,GAJaP,EAAc,MCZF,gBDcXA,EAAc,MCsBL,aDpBHA,EAAc,MCFb,qBCkEnBQ,EAxES,WAAO,IAAD,EACbC,YAAwB,GAAhCC,EADqB,sBAEJD,YAAe,GAFX,mBAErBE,EAFqB,KAEfC,EAFe,OAGMH,WAAoB,IAH1B,mBAGrBI,EAHqB,KAGVC,EAHU,OAIFL,WAAoB,IAJlB,mBAIrBM,EAJqB,KAIdC,EAJc,OAKFP,WAAoB,IALlB,mBAKrBQ,EALqB,KAKdC,EALc,OAMET,YAAwB,GAN1B,mBAMrBU,EANqB,KAMZC,EANY,KAS5BX,aAAgB,WACdY,MACC,CAACX,IAEJ,IAAMW,EAAa,8BAAAlB,EAAAC,OAAA,kEAAAD,EAAA,MACSI,EAAkB,CAACe,GAAI,eADhC,OACXC,EADW,OAEXC,EAAgBD,EAAOE,SAASD,SAChCE,EAAcH,EAAOE,SAASC,OAEpCC,YAAW,WACPC,OAAeC,OAAOnB,KAAK,GAAIc,GAEjCJ,GAAW,GAETQ,OAAeC,OAAOC,SAAQ,SAACC,GAC/BjB,EAAaY,EAAOK,IACpBf,EAASU,EAAOK,GAAGC,GAAG,IACtBd,EAASQ,EAAOK,GAAGE,SAIpB,GAjBc,sCAmCnB,OACE,uBAAK/D,UAAU,SACb,gBAAC,EAAD,CAAYU,KAAMuC,IAClB,uBAAKjD,UAAU,SACb,uBAAKA,UAAU,gBACb,wBAAMA,UAAU,eAAhB,UAAkC2C,EAAUqB,KAA5C,cAAsDnB,EAAMmB,QAE9D,uBAAKhE,UAAU,gBACb,uBAAKC,IAAG,UAAK8C,EAAMkB,OAAX,kBAAmC9D,IAAI,OAGnD,uBAAKH,UAAU,aACb,qBAAQA,UAAU,qBAAqBI,QAjBvB,WAClBsD,OAAeC,OAAOO,YACxBxB,GAAQ,KAgBF,qBAAG1C,UAAU,wBAAb,WACF,qBAAQA,UAAU,qBAChBI,QA9Bc,WACnBqC,EAAwCiB,OAAeC,OAAOQ,QAAtDT,OAAeC,OAAOlB,OAC/BC,GAASD,KA6BH,qBAAGzC,UAAU,wBAA0ByC,EAAuB,0CAAhB,4CAChD,qBAAQzC,UAAU,qBAAqBI,QA3BvB,WAClBsD,OAAeC,OAAOS,YACxB1B,GAAQ,KA0BF,qBAAG1C,UAAU,wBAAb,cC9CKqE,G,OArBwB,SAAC5D,GAMtC,OAJAZ,qBAAU,WACRC,QAAQC,IAAI,KACX,IAGD,oCAII,yBAAKC,UAAU,SACXS,EAAM6D,a,wCCdGC,E,WACnB,WAAYnB,EAAaoB,GAAyB,yBAKzCC,YAAc,CAAC,CACtBT,KAAM,UACNR,OAAQ,GACRJ,GAAI,wDAEN,CACEY,KAAM,UACNR,OAAQ,GACRJ,GAAI,0DAEN,CACEY,KAAM,UACNR,OAAQ,GACRJ,GAAI,2DAlB2C,KAqB1CA,GAAa,GArB6B,KAsB1CO,OAAS,KAtBiC,KAuB1Ce,SAAmB,SAvBuB,KAwBzCF,SAAwB,GAxBiB,KAyBzCG,QAAkB,EAzBuB,KA0BzCC,QAAkB,EA1BuB,KA2BzCC,UAAoB,EA3BqB,KA4BzCC,WAAqB,iDA5BoB,KA6BzCC,WAAyB,GA5B/BC,KAAK5B,GAAKA,GAAM,IAChB4B,KAAKR,SAAWA,GAAYQ,KAAKP,Y,iDA+BvBvD,EAAiBsD,GAAyB,IAAD,OACnDQ,KAAKR,SAAWA,GAAY,GAE5BQ,KAAKrB,OAASsB,SAASC,eAAeF,KAAK5B,IAE3C4B,KAAKrB,OAAO1D,IAAM+E,KAAKR,SAASQ,KAAKJ,SAASxB,GAE9C4B,KAAKrB,OAAOwB,iBAAiB,kBAAkB,SAACC,GAG9C,EAAKT,QAAS,EAEV,EAAKE,UACP,EAAKlB,OAAOlB,OAGd3C,QAAQC,IAAI,EAAKgF,YAGjB,EAAKA,WAAWM,SAAQ,SAACC,GACvBxF,QAAQC,IAAI,KACZuF,EAAG,EAAKV,eAIZI,KAAKrB,OAAOwB,iBAAiB,SAAS,WACpCrF,QAAQC,IAAI,mBAEZ,EAAK4E,QAAS,EACd,EAAKY,YAGPP,KAAKrB,OAAOwB,iBAAiB,SAAS,SAACK,GAErC,EAAKpB,iB,6BAOHY,KAAKL,QACPK,KAAKrB,OAAOlB,S,8BAOduC,KAAKrB,OAAOQ,U,+BAWEsB,GACdT,KAAKR,SAASkB,KAAKD,K,uCAGGE,GACtBX,KAAKR,SAAWmB,EAEhB,IAAIC,EAAMC,KAAKC,MAAMD,KAAKE,SAAWf,KAAKR,SAASwB,QAEnDhB,KAAKJ,QAAUgB,EAEfZ,KAAKrB,OAAO1D,IAAM+E,KAAKF,WAAaE,KAAKR,SAASQ,KAAKJ,SAASxB,K,kCAI3C,IAAjB4B,KAAKJ,UACPI,KAAKJ,QAAUI,KAAKR,SAASwB,QAG/BhB,KAAKrB,OAAO1D,IAAM+E,KAAKF,WAAaE,KAAKR,WAAWQ,KAAKJ,SAASxB,GAElE4B,KAAKvC,S,kCAIDuC,KAAKJ,UAAYI,KAAKR,SAASwB,OAAS,IAC1ChB,KAAKJ,SAAW,GAGlBI,KAAKrB,OAAO1D,IAAM+E,KAAKF,WAAaE,KAAKR,WAAWQ,KAAKJ,SAASxB,GAElE4B,KAAKvC,S,8BAGQwD,GACbjB,KAAKD,WAAWW,KAAKO,K,+BAIrB,OAAQjB,KAAKN,UACX,IAAK,SACHM,KAAKkB,aACL,MACF,IAAK,SACHlB,KAAKmB,aACL,MACF,IAAK,QACHnB,KAAKoB,e,mCAOTpB,KAAKrB,OAAOlB,S,mCAMZ,IADA,IAAI4D,EAAYR,KAAKC,MAAMD,KAAKE,SAAWf,KAAKR,SAASwB,QAClDK,IAAcrB,KAAKJ,SACxByB,EAAYR,KAAKC,MAAMD,KAAKE,SAAWf,KAAKR,SAASwB,QAGvDhB,KAAKJ,QAAUyB,EACfrB,KAAKH,UAAW,EAChBG,KAAKrB,OAAO1D,IAAM+E,KAAKF,WAAaE,KAAKR,SAASQ,KAAKJ,SAASxB,K,kCAKhE4B,KAAKZ,c,gCA9EL,OAAOY,KAAKR,W,+BAIZ,OAAOQ,KAAKJ,Y,KCtFK0B,E,YACnB,WAAY7F,GAAyB,IAAD,8BAClC,4CAAMA,KACD8F,MAAQ,CACXC,QAAS,CACP/E,IAAK,2DACL+B,OAAQ,GACRQ,KAAM,KANwB,E,iFAYlC,IAAML,EAAS,IAAIY,EAAI,eACvBb,OAAOC,OAASA,I,+BAMhB,OACE,oCACE,2BAAOP,GAAG,qB,GAtBkBqD,a,gBCGrBC,EADDC,aAXE,WAAiC,IAAhCJ,EAA+B,uDADlC,IACkBK,EAAgB,uCAC9C,OAAQA,EAAOC,MACb,IAAK,qBACH,OAAON,EAAS,IAClB,IAAK,qBACH,OAAOA,EAAS,IAClB,QACE,OAAOA,M,cCCbO,IAASC,OACP,kBAAC,IAAD,CAAUL,MAAOA,GACf,mBCNW,WACb,OACE,kBAAC,IAAD,CAAeM,SAAS,oBACtB,kBAAC,EAAD,MACA,kBAAC,EAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAW7E,IACjC,kBAAC,IAAD,CAAO2E,OAAK,EAACC,KAAK,OAAOC,UAAW1H,SDD1C,OAEFwF,SAASC,eAAe,U,mBEf1BkC,EAAOC,QAAU,IAA0B,kC","file":"static/js/main.d891203e.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nconst App: React.FC = () => {\n  // console.log(1);\n  \n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    console.log(1);\n    \n  })\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          {count},<button onClick={ () => {setCount(count + 1)} }>play.</button>\n          Edit <code>src/App.tsx</code> and save to reload.\n        </p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import * as React from 'react';\r\nimport './_styles/OilLoading.scss'\r\n\r\ninterface Props {\r\n  show: boolean;\r\n}\r\n\r\nconst OilLoading: React.SFC<Props> = (props: Props) => {\r\n  \r\n  //console.log(props.show);\r\n  \r\n  return(\r\n    <>\r\n      {props.show ? (\r\n        <div className=\"_loading-swiper\">\r\n          <div className=\"_OilLoading\"/>\r\n        </div>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default OilLoading","import axios, { AxiosRequestConfig } from 'axios'\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_PROXY_URL\r\n\r\naxios.interceptors.request.use(config => {\r\n  // Do something before request is sent\r\n  return config;\r\n  },error => {\r\n  // Do something with request error\r\n  return Promise.reject(error);\r\n});\r\n\r\naxios.interceptors.response.use(response => {\r\n  // Do something before response is sent\r\n  return response.data;\r\n  },error => {\r\n  // Do something with response error\r\n  return Promise.reject(error);\r\n});\r\n\r\nconst get = (url: string, params?: any) => {\r\n  return axios.get(url, {params})\r\n}\r\n\r\nconst post = (url: string, params?: any, config?: AxiosRequestConfig) => {\r\n  return axios.post(url, params, config)\r\n}\r\n\r\nconst getl = (url: string, params?: any) => {\r\n  return axios.get(url, {params})\r\n}\r\n\r\nconst postl = (url: string, params?: any, config?: AxiosRequestConfig) => {\r\n  return axios.post(url, params, config)\r\n}\r\n\r\nexport default {\r\n  get,\r\n  getl,\r\n  post,\r\n  postl\r\n}\r\n","import http from './http'\r\nimport {\r\n  Api_artistList,\r\n  Api_likelist,\r\n  Api_playlistDetail\r\n} from './types'\r\n\r\nexport const createRequest = (methods: string, api: string) => {\r\n  return async (params: any) => {\r\n    let res = (http as any)[methods](api, params)\r\n    return res\r\n  }\r\n}\r\n\r\nexport const getArtList = createRequest('get', Api_artistList)\r\n\r\nexport const getLikeList = createRequest('get', Api_likelist)\r\n\r\nexport const getPlaylistDetail = createRequest('get', Api_playlistDetail)","export const Api_hotTopic: string = '/hot/topic'  //获取热门话题  \r\n\r\nexport const Api_artistList: string = '/artist/list'  //歌手列表\r\n\r\nexport const Api_artistTopSong: string = '/artist/top/song' //歌手热门50首歌曲\r\n\r\nexport const Api_playlistCatlist: string = '/playlist/catlist' //歌单分类\r\n\r\nexport const Api_playlistHot: string = '/playlist/hot' //热门歌单分类\r\n\r\nexport const Api_topPlaylist: string = '/top/playlist'  //歌单 ( 网友精选碟 )\r\n\r\nexport const Api_topPlaylistHighquality = '/top/playlist/highquality' //获取精品歌单\r\n\r\nexport const Api_relatedPlaylist = '/related/playlist'  //相关歌单推荐\r\n\r\nexport const Api_playlistDetail = '/playlist/detail'  //获取歌单详情\r\n\r\nexport const Api_songUrl: string = '/song/url'  //获取音乐 url\r\n\r\nexport const Api_checkMusic: string = '/check/music'  //音乐是否可用\r\n\r\nexport const Api_search: string = '/search' //搜索接口\r\n\r\nexport const Api_searchDefault: string = '/search/default'  //默认搜索关键词\r\n\r\nexport const Api_searchHot: string = '/search/hot'  //热搜列表(简略)\r\n\r\nexport const  Api_searchHotdetail: string = '/search/hot/detail'  //热搜列表(详细)\r\n\r\nexport const Api_searchSuggest: string = '/search/suggest'  //搜索建议\r\n\r\nexport const Api_searchMultimatch: string = '/search/multimatch'  //搜索多重匹配\r\n\r\nexport const Api_lyric: string = '/lyric?id'  //获取歌词\r\n\r\nexport const Api_topSong: string = '/top/song'  //新歌速递\r\n\r\nexport const Api_likelist: string = '/likelist' //喜欢音乐列表","import * as React from 'react';\r\nimport './_styles/index.scss'\r\nimport OilLoading from '../../../components/loading/OilLoading'\r\n\r\nimport { getPlaylistDetail } from '../../../api/request';\r\nimport { Button } from 'antd-mobile';\r\n\r\nexport interface Props {\r\n}\r\n\r\nconst Home: React.SFC = () => {\r\n  const [init] = React.useState<boolean>(true)\r\n  const [play, setPlay] = React.useState(false)\r\n  const [musicInfo, setMusicInfo] = React.useState<any>({})\r\n  const [autor, setAutor] = React.useState<any>({})\r\n  const [album, setAlbum] = React.useState<any>({})\r\n  const [loading, setLoading] = React.useState<boolean>(true)\r\n  \r\n\r\n  React.useEffect(() => {\r\n    initPlayer()\r\n  }, [init])\r\n\r\n  const initPlayer = async () => {\r\n    const gdList: any = await getPlaylistDetail({id: '524176061'})\r\n    const trackIds: any = gdList.playlist.trackIds\r\n    const tracks: any = gdList.playlist.tracks\r\n\r\n    setTimeout(() => {\r\n      ;(window as any).player.init({}, trackIds)\r\n\r\n      setLoading(false)\r\n\r\n      ;(window as any).player.onIndex((i: any) => {\r\n        setMusicInfo(tracks[i])\r\n        setAutor(tracks[i].ar[0])\r\n        setAlbum(tracks[i].al)\r\n        \r\n      })\r\n\r\n    }, 0)\r\n  }\r\n\r\n  const handlePlayBtn = (): void => {\r\n    !play ? (window as any).player.play() : (window as any).player.pause()\r\n    setPlay(!play)\r\n  }\r\n\r\n  const handleNextBtn = (): void => {\r\n    ;(window as any).player.nextMusic()\r\n    setPlay(true)\r\n  }\r\n\r\n  const handlePrevBtn = (): void => {\r\n    ;(window as any).player.prevMusic()\r\n    setPlay(true)\r\n  }\r\n  \r\n  return(\r\n    <div className=\"_home\">\r\n      <OilLoading show={loading}/>\r\n      <div className=\"_main\">\r\n        <div className=\"_music-title\">\r\n          <span className=\"scroll-text\">{`${musicInfo.name} - ${autor.name}`}</span>\r\n        </div>\r\n        <div className=\"_music-cover\">\r\n          <img src={`${album.picUrl}?param=200y200`} alt=\"\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"btn-group\">\r\n        <Button className=\"_home-btn prev-btn\" onClick={handlePrevBtn}>\r\n          <i className=\"icon-font x-y-center\">&#xea44;</i></Button>\r\n        <Button className=\"_home-btn play-btn\"\r\n          onClick={handlePlayBtn}>\r\n          <i className=\"icon-font x-y-center\">{ !play ? <>&#xe6a4;</> : <>&#xe63a;</>}</i></Button>\r\n        <Button className=\"_home-btn next-btn\" onClick={handleNextBtn}>\r\n          <i className=\"icon-font x-y-center\">&#xea47;</i></Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","import React, { useEffect } from 'react'\r\n// import MyHeader from './_parts/header'\r\n// import MusicBar from '../../components/MusicBar'\r\nimport './_styles/default-layout.scss'\r\n\r\ninterface Props {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst DefaultLayout: React.FC<Props> = (props: Props) => {\r\n  \r\n  useEffect(() => {\r\n    console.log(1);\r\n  }, [])\r\n  \r\n  return(\r\n    <>\r\n        {/* <div className=\"_header\">\r\n          <MyHeader />\r\n        </div> */}\r\n        <div className=\"_main\">\r\n          { props.children }\r\n        </div>\r\n        {/* <div className=\"_footer\">\r\n          <MusicBar />\r\n        </div> */}\r\n      </>\r\n  )\r\n}\r\n\r\nexport default DefaultLayout\r\n","export interface playListI {\r\n  name: string\r\n  tracks: string\r\n  id: string\r\n  sourceList?: playListI[]\r\n}\r\n\r\nexport default class Mp3 {\r\n  constructor(id?: string, playList?: playListI[]) {\r\n    this.id = id || '2'\r\n    this.playList = playList || this.defaultList\r\n  }\r\n\r\n  readonly defaultList = [{\r\n    name: 'default',\r\n    tracks: '',\r\n    id: 'https://music.163.com/song/media/outer/url?id=536018'\r\n  },\r\n  {\r\n    name: 'default',\r\n    tracks: '',\r\n    id: 'https://music.163.com/song/media/outer/url?id=22761030'\r\n  },\r\n  {\r\n    name: 'default',\r\n    tracks: '',\r\n    id: 'https://music.163.com/song/media/outer/url?id=29792560'\r\n  }]\r\n\r\n  public id: string = ''\r\n  public player = null as unknown as HTMLAudioElement\r\n  public playMode: string = 'random' //  order 顺序  random 随机 single 单曲循环\r\n  private playList: playListI[] = []\r\n  private buffer: boolean = false\r\n  private inMusic: number = 0\r\n  private nextPlay: boolean = false\r\n  private musicTitle: string = 'https://music.163.com/song/media/outer/url?id='\r\n  private onIndexFun: Function[] = []\r\n\r\n\r\n\r\n  public init(config?: object, playList?: playListI[]) {\r\n    this.playList = playList || []\r\n\r\n    this.player = document.getElementById(this.id) as HTMLAudioElement\r\n    \r\n    this.player.src = this.playList[this.inMusic].id\r\n\r\n    this.player.addEventListener(\"canplaythrough\", (event) => {\r\n      // console.log('buffer is true')\r\n      \r\n      this.buffer = true\r\n\r\n      if (this.nextPlay) {\r\n        this.player.play()\r\n      }\r\n\r\n      console.log(this.onIndexFun);\r\n      \r\n\r\n      this.onIndexFun.forEach((fn: any) => {\r\n        console.log(111);\r\n        fn(this.inMusic)\r\n      })\r\n    });\r\n\r\n    this.player.addEventListener('ended', () => {\r\n      console.log('buffer is false')\r\n\r\n      this.buffer = false;\r\n      this.evLoop()\r\n    })\r\n\r\n    this.player.addEventListener('error', (err) => {\r\n      // console.log(err); 向外抛出err\r\n      this.nextMusic()\r\n    })\r\n  }\r\n\r\n  \r\n\r\n  public play(): void {\r\n    if (this.buffer) {\r\n      this.player.play()\r\n    } else {\r\n      // throw new Error('歌曲未缓冲完成')\r\n    }\r\n  }\r\n\r\n  public pause(): void {\r\n    this.player.pause()\r\n  }\r\n\r\n  public get musicList(): playListI[] {\r\n    return this.playList\r\n  }\r\n\r\n  public get indexNum(): number {\r\n    return this.inMusic\r\n  }\r\n\r\n  public addMusic(music: playListI): void {\r\n    this.playList.push(music)\r\n  }\r\n\r\n  public replaceMusicList(musicList: playListI[]): void {\r\n    this.playList = musicList\r\n\r\n    let num = Math.floor(Math.random() * this.playList.length)\r\n\r\n    this.inMusic = num\r\n\r\n    this.player.src = this.musicTitle + this.playList[this.inMusic].id\r\n  }\r\n\r\n  public prevMusic(): void {\r\n    if (this.inMusic === 0) {\r\n      this.inMusic = this.playList.length\r\n    }\r\n\r\n    this.player.src = this.musicTitle + this.playList[++this.inMusic].id\r\n\r\n    this.play()\r\n  }\r\n\r\n  public nextMusic(): void {\r\n    if (this.inMusic === this.playList.length - 1) {\r\n      this.inMusic = -1\r\n    }\r\n\r\n    this.player.src = this.musicTitle + this.playList[++this.inMusic].id\r\n\r\n    this.play()\r\n  }\r\n\r\n  public onIndex(Fun: Function): void {\r\n    this.onIndexFun.push(Fun)\r\n  }\r\n\r\n  private evLoop(): void {\r\n    switch (this.playMode) {\r\n      case 'single':\r\n        this.singlePlay()\r\n        break\r\n      case 'random':\r\n        this.randomPlay()\r\n        break\r\n      case 'order':\r\n        this.orderPlay()\r\n        break\r\n    }\r\n  }\r\n\r\n  private singlePlay(): void {\r\n    // this.player.src = this.playList[1].url\r\n    this.player.play()\r\n  }\r\n\r\n  private randomPlay(): void {\r\n\r\n    let randomNum = Math.floor(Math.random() * this.playList.length)\r\n    while (randomNum === this.inMusic) {\r\n      randomNum = Math.floor(Math.random() * this.playList.length)\r\n    }\r\n\r\n    this.inMusic = randomNum\r\n    this.nextPlay = true\r\n    this.player.src = this.musicTitle + this.playList[this.inMusic].id\r\n  }\r\n\r\n  private orderPlay(): void {\r\n\r\n    this.nextMusic()\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport Mp3 from '../plugins/Mp3'\r\ndeclare var window: any\r\n\r\nexport interface Props {\r\n  children?: React.ReactNode;\r\n}\r\n\r\ninterface State {\r\n  nowPlay: playListI;\r\n}\r\n\r\nexport default class Player extends Component<Props, State> {\r\n  constructor(props: Readonly<Props>) {\r\n    super(props)\r\n    this.state = {\r\n      nowPlay: {\r\n        url: 'https://music.163.com/song/media/outer/url?id=1412263970',\r\n        tracks: '',\r\n        name: ''\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const player = new Mp3('globalAudio')\r\n    window.player = player\r\n\r\n    // player.init()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <>\r\n        <audio id=\"globalAudio\"></audio>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\ninterface playListI {\r\n  name?: string;\r\n  tracks?: string;\r\n  url?: string;\r\n}\r\n","import { createStore } from 'redux'\r\n\r\nconst tiger = 1000;\r\nconst reducer = (state = tiger, action: any) => {\r\n  switch (action.type){\r\n    case '涨工资': \r\n      return state += 100;\r\n    case '扣工资': \r\n      return state -= 100;\r\n    default: \r\n      return state;\r\n  }\r\n}\r\n\r\nconst store = createStore(reducer)\r\nexport default store","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Router from './router/index';\r\n\r\nimport { Provider } from 'react-redux'\r\nimport store from './redux/store'\r\n\r\nimport 'antd-mobile/dist/antd-mobile.css';\r\nimport './assets/style/main.scss';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <Router />\r\n  </Provider>, \r\n  document.getElementById('root')\r\n);\r\n","import React from 'react';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport App from '../views/App'\r\nimport Home from '../views/pages/home'\r\nimport DefaultLayout from '../views/layout/default'\r\nimport Player from '../components/player';\r\n\r\nexport default function () {\r\n  return (\r\n    <BrowserRouter basename=\"/react-ts-music/\">\r\n      <Player />\r\n      <DefaultLayout>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Home} ></Route>\r\n          <Route exact path=\"/app\" component={App} ></Route>\r\n        </Switch>\r\n      </DefaultLayout>\r\n    </BrowserRouter>\r\n  )\r\n}","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";"],"sourceRoot":""}