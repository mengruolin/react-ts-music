(this["webpackJsonpm-simple"]=this["webpackJsonpm-simple"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},165:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(32),c=n.n(s),r=n(84),l=n(13),u=n(9),o=n(82),m=n.n(o),p=(n(95),function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){console.log(1)})),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),i.a.createElement("p",null,n,",",i.a.createElement("button",{onClick:function(){s(n+1)}},"play."),"Edit ",i.a.createElement("code",null,"src/App.tsx")," and save to reload."),i.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")))}),h=(n(96),n(42)),d=n.n(h),f=n(25),y=n.n(f),g=(n(146),n(147),function(e){return a.createElement(a.Fragment,null,e.show?a.createElement("div",{className:"_loading-swiper"},a.createElement("div",{className:"_OilLoading"})):a.createElement(a.Fragment,null))}),v=n(14),E=n.n(v);E.a.defaults.baseURL="http://musicapi.leanapp.cn/",E.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),E.a.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var b={get:function(e,t){return E.a.get(e,{params:t})},getl:function(e,t){return E.a.get(e,{params:t})},post:function(e,t,n){return E.a.post(e,t,n)},postl:function(e,t,n){return E.a.post(e,t,n)}},k=function(e,t){return function(n){var a;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=b[e](t,n),i.abrupt("return",a);case 2:case"end":return i.stop()}}))}},M=(k("get","/artist/list"),k("get","/likelist"),k("get","/playlist/detail")),L=function(){var e=a.useState(!0),t=Object(u.a)(e,1)[0],n=a.useState(!1),i=Object(u.a)(n,2),s=i[0],c=i[1],r=a.useState({}),l=Object(u.a)(r,2),o=l[0],m=l[1],p=a.useState({}),h=Object(u.a)(p,2),f=h[0],v=h[1],E=a.useState({}),b=Object(u.a)(E,2),k=b[0],L=b[1],x=a.useState(!0),w=Object(u.a)(x,2),j=w[0],N=w[1];a.useEffect((function(){O()}),[t]);var O=function(){var e,t,n;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(M({id:"524176061"}));case 2:e=a.sent,t=e.playlist.trackIds,n=e.playlist.tracks,setTimeout((function(){window.player.init({},t),N(!1),window.player.onIndex((function(e){m(n[e]),v(n[e].ar[0]),L(n[e].al)}))}),0);case 6:case"end":return a.stop()}}))};return a.createElement("div",{className:"_home"},a.createElement(g,{show:j}),a.createElement("div",{className:"_main"},a.createElement("div",{className:"_music-title"},a.createElement("span",{className:"scroll-text"},"".concat(o.name," - ").concat(f.name))),a.createElement("div",{className:"_music-cover"},a.createElement("img",{src:"".concat(k.picUrl,"?param=200y200"),alt:""}))),a.createElement("div",{className:"btn-group"},a.createElement(d.a,{className:"_home-btn prev-btn",onClick:function(){window.player.prevMusic(),c(!0)}},a.createElement("i",{className:"icon-font x-y-center"},"\uea44")),a.createElement(d.a,{className:"_home-btn play-btn",onClick:function(){s?window.player.pause():window.player.play(),c(!s)}},a.createElement("i",{className:"icon-font x-y-center"},s?a.createElement(a.Fragment,null,"\ue63a"):a.createElement(a.Fragment,null,"\ue6a4"))),a.createElement(d.a,{className:"_home-btn next-btn",onClick:function(){window.player.nextMusic(),c(!0)}},a.createElement("i",{className:"icon-font x-y-center"},"\uea47"))))},x=(n(165),function(e){return Object(a.useEffect)((function(){console.log(1)}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"_main"},e.children))}),w=n(39),j=n(40),N=n(88),O=n(83),P=n(89),_=function(){function e(t,n){Object(w.a)(this,e),this.defaultList=[{name:"default",tracks:"",id:"https://music.163.com/song/media/outer/url?id=536018"},{name:"default",tracks:"",id:"https://music.163.com/song/media/outer/url?id=22761030"},{name:"default",tracks:"",id:"https://music.163.com/song/media/outer/url?id=29792560"}],this.id="",this.player=null,this.playMode="random",this.playList=[],this.buffer=!1,this.inMusic=0,this.nextPlay=!1,this.musicTitle="https://music.163.com/song/media/outer/url?id=",this.onIndexFun=[],this.id=t||"2",this.playList=n||this.defaultList}return Object(j.a)(e,[{key:"init",value:function(e,t){var n=this;this.playList=t||[],this.player=document.getElementById(this.id),this.player.src=this.playList[this.inMusic].id,this.player.addEventListener("canplaythrough",(function(e){n.buffer=!0,n.nextPlay&&n.player.play(),console.log(n.onIndexFun),n.onIndexFun.forEach((function(e){console.log(111),e(n.inMusic)}))})),this.player.addEventListener("ended",(function(){console.log("buffer is false"),n.buffer=!1,n.evLoop()})),this.player.addEventListener("error",(function(e){n.nextMusic()}))}},{key:"play",value:function(){this.buffer&&this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"addMusic",value:function(e){this.playList.push(e)}},{key:"replaceMusicList",value:function(e){this.playList=e;var t=Math.floor(Math.random()*this.playList.length);this.inMusic=t,this.player.src=this.musicTitle+this.playList[this.inMusic].id}},{key:"prevMusic",value:function(){0===this.inMusic&&(this.inMusic=this.playList.length),this.player.src=this.musicTitle+this.playList[++this.inMusic].id,this.play()}},{key:"nextMusic",value:function(){this.inMusic===this.playList.length-1&&(this.inMusic=-1),this.player.src=this.musicTitle+this.playList[++this.inMusic].id,this.play()}},{key:"onIndex",value:function(e){this.onIndexFun.push(e)}},{key:"evLoop",value:function(){switch(this.playMode){case"single":this.singlePlay();break;case"random":this.randomPlay();break;case"order":this.orderPlay()}}},{key:"singlePlay",value:function(){this.player.play()}},{key:"randomPlay",value:function(){for(var e=Math.floor(Math.random()*this.playList.length);e===this.inMusic;)e=Math.floor(Math.random()*this.playList.length);this.inMusic=e,this.nextPlay=!0,this.player.src=this.musicTitle+this.playList[this.inMusic].id}},{key:"orderPlay",value:function(){this.nextMusic()}},{key:"musicList",get:function(){return this.playList}},{key:"indexNum",get:function(){return this.inMusic}}]),e}(),F=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(N.a)(this,Object(O.a)(t).call(this,e))).state={nowPlay:{url:"https://music.163.com/song/media/outer/url?id=1412263970",tracks:"",name:""}},n}return Object(P.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=new _("globalAudio");window.player=e}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("audio",{id:"globalAudio"}))}}]),t}(a.Component),I=n(87),A=n(41),S=Object(A.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"\u6da8\u5de5\u8d44":return e+100;case"\u6263\u5de5\u8d44":return e-100;default:return e}}));n(171),n(172);c.a.render(i.a.createElement(I.a,{store:S},i.a.createElement((function(){return i.a.createElement(r.a,null,i.a.createElement(F,null),i.a.createElement(x,null,i.a.createElement(l.c,null,i.a.createElement(l.a,{exact:!0,path:"/",component:L}),i.a.createElement(l.a,{exact:!0,path:"/app",component:p}))))}),null)),document.getElementById("root"))},82:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},90:function(e,t,n){e.exports=n(173)},95:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.3fb579d5.chunk.js.map